<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radha Counter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #D054FF, #5463FF);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }
        #counter {
            color: white;
            font-size: 20px;
            margin-top: 20px;
            font-weight: bold;
            position: absolute;
            bottom: 20px;
        }
        .radha-name {
            color: white;
            font-size: 18px;
            position: absolute;
            bottom: -100px;
            animation: moveUp 10s linear;
        }
        @keyframes moveUp {
            0% { bottom: -100px; }
            100% { bottom: 100vh; }
        }
        #radhaButton {
            position: fixed;
            right: 20px;
            bottom: 20px;
            background-color: #ff6347;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }
        #radhaButton:active {
            background-color: #ff0000;
        }
        #imageSetup {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 18px;
            color: white;
            cursor: pointer;
            z-index: 100;
        }
        #imageSetupModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }
        #imageSetupModal .modal-content {
            background: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 80%;
            height: 90%;
            overflow-y: scroll;
        }
        .mini-img-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
        }
        .mini-img-container img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 10px;
            position: relative;
        }
        .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: red;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 12px;
            padding: 5px;
            cursor: pointer;
        }
        #imageSlideshow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    z-index: -1;
    transition: background-image 1s ease-in-out;
}


/* ----- BEST SLIDESHOW EFFECTS ----- */

/* 1) FADE */
.fade {
    animation: fadeAnim 10s ease-in-out;
}

@keyframes fadeAnim {
    0% { opacity: 0; }
    20% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 1; }
}


/* 2) SLIDE LEFT */
.slideLeft {
    animation: slideLeftAnim 10s ease-in-out;
}
@keyframes slideLeftAnim {
    0% { transform: translateX(100%); opacity: 0; }
    30% { transform: translateX(0); opacity: 1; }
    70% { transform: translateX(0); opacity: 1; }
    100% { transform: translateX(-100%); opacity: 0; }
}

/* 3) SLIDE RIGHT */
.slideRight {
    animation: slideRightAnim 10s ease-in-out;
}
@keyframes slideRightAnim {
    0% { transform: translateX(-100%); opacity: 0; }
    30% { transform: translateX(0); opacity: 1; }
    70% { transform: translateX(0); opacity: 1; }
    100% { transform: translateX(100%); opacity: 0; }
}

/* 4) ZOOM IN */
.zoomIn {
    animation: zoomInAnim 10s ease-in-out;
}
@keyframes zoomInAnim {
    0% { transform: scale(1); opacity: 0; }
    30% { opacity: 1; }
    70% { transform: scale(1.1); opacity: 1; }
    100% { opacity: 0; }
}

/* 5) ZOOM OUT */
.zoomOut {
    animation: zoomOutAnim 10s ease-in-out;
}
@keyframes zoomOutAnim {
    0% { transform: scale(1.2); opacity: 0; }
    30% { transform: scale(1); opacity: 1; }
    70% { transform: scale(1); opacity: 1; }
    100% { opacity: 0; }
}

/* 6) ROTATE LEFT */
.rotateLeft {
    animation: rotateLeftAnim 10s ease-in-out;
}
@keyframes rotateLeftAnim {
    0% { transform: rotate(-45deg) scale(1); opacity: 0; }
    30% { transform: rotate(0deg) scale(1); opacity: 1; }
    70% { transform: rotate(0deg) scale(1); opacity: 1; }
    100% { transform: rotate(-45deg) scale(1); opacity: 0; }
}

/* 7) ROTATE RIGHT */
.rotateRight {
    animation: rotateRightAnim 10s ease-in-out;
}
@keyframes rotateRightAnim {
    0% { transform: rotate(45deg) scale(1); opacity: 0; }
    30% { transform: rotate(0deg) scale(1); opacity: 1; }
    70% { transform: rotate(0deg) scale(1); opacity: 1; }
    100% { transform: rotate(45deg) scale(1); opacity: 0; }
}

/* 8) BLUR IN/OUT */
.blurEffect {
    animation: blurAnim 10s ease-in-out;
}
@keyframes blurAnim {
    0% { filter: blur(10px); opacity: 0; }
    30% { filter: blur(0px); opacity: 1; }
    70% { filter: blur(0px); opacity: 1; }
    100% { filter: blur(10px); opacity: 0; }
}


        
        #okBtn {
            margin-top: 20px;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
        #okBtn:active {
            background-color: #218838;
        }
        
        /* ===== FRAME EDITOR ===== */

.blur-layer{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    filter:blur(12px) brightness(0.6);
    pointer-events:none;
}

.frame{
    position:fixed;
    width:800px;
    height:450px;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    overflow:hidden;
    border:2px solid white;
    z-index:5;
}

.clear-layer{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    cursor:grab;
}

.frame-controls{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:10px;
    z-index:20;
}
        
    </style>
    
  

</head>
<body>



    <div id="counter">Conting: 0</div>
    <button id="radhaButton">à¤°à¤¾à¤§à¤¾</button>
    <div id="imageSetup">Set Images</div>

    <div id="imageSetupModal">
        <div class="modal-content">
            <h3>Select Images</h3>
            <input type="file" id="imageInput" accept="image/*" multiple>
            <div class="mini-img-container" id="miniImages"></div>
            <button id="okBtn">OK</button>
        </div>
    </div>

    <div id="imageSlideshow"></div>
    <!-- ===== Frame Editor ===== -->

<input type="file" id="frameUpload" style="position:fixed; top:20px; left:20px; z-index:20;">

<img id="blurImage" class="blur-layer">
<div class="frame">
    <img id="clearImage" class="clear-layer">
</div>

<div class="frame-controls">
    <button id="zoomIn">+</button>
    <button id="zoomOut">-</button>
    <button id="rotateFrame">Rotate</button>
</div>

<!-- Mode Selection Popup -->
<div id="modePopup" style="
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.8);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:2000;
">
    <div style="
        background:white;
        padding:30px;
        text-align:center;
        border-radius:10px;
        width:300px;
    ">
        <h3>Choose Slideshow Mode</h3>
        <button id="onlineModeBtn">Online</button>
        <button id="offlineModeBtn">Offline</button>
    </div>
</div>


    <script>
        let count = localStorage.getItem('count') ? parseInt(localStorage.getItem('count')) : 0;
        let images = JSON.parse(localStorage.getItem('images')) || [];
        const counterElement = document.getElementById('counter');
        const radhaButton = document.getElementById('radhaButton');
        const imageSetupModal = document.getElementById('imageSetupModal');
        const imageSetup = document.getElementById('imageSetup');
        const miniImagesContainer = document.getElementById('miniImages');
        const okBtn = document.getElementById('okBtn');
        const imageSlideshow = document.getElementById('imageSlideshow');
        const modePopup = document.getElementById("modePopup");
        const onlineModeBtn = document.getElementById("onlineModeBtn");
        const offlineModeBtn = document.getElementById("offlineModeBtn");
        
        
        let cropper;

        let draggingImage = null;

        



        function addMiniImages() {
            miniImagesContainer.innerHTML = ''; // Clear previous images
            images.forEach((imageSrc, index) => {
                let imgDiv = document.createElement('div');
                imgDiv.style.position = 'relative';
                let img = document.createElement('img');
                img.src = imageSrc;
                img.draggable = true;
                img.dataset.index = index;
                img.addEventListener('dragstart', dragStart);
                img.addEventListener('dragover', dragOver);
                img.addEventListener('drop', dropImage);
                img.addEventListener('dragend', dragEnd);

                let deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'X';
                deleteBtn.classList.add('delete-btn');
                deleteBtn.addEventListener('click', () => deleteImage(index));

                imgDiv.appendChild(img);
                imgDiv.appendChild(deleteBtn);
                miniImagesContainer.appendChild(imgDiv);
            });
        }

        function deleteImage(index) {
            images.splice(index, 1);
            localStorage.setItem('images', JSON.stringify(images));
            addMiniImages();
        }

        function dragStart(e) {
            draggingImage = e.target;
            e.dataTransfer.setData('text/plain', e.target.dataset.index);
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function dropImage(e) {
            e.preventDefault();
            if (draggingImage !== e.target) {
                let draggedIndex = draggingImage.dataset.index;
                let targetIndex = e.target.dataset.index;
                [images[draggedIndex], images[targetIndex]] = [images[targetIndex], images[draggedIndex]];
                localStorage.setItem('images', JSON.stringify(images));
                addMiniImages();
            }
        }

        function dragEnd() {
            draggingImage = null;
        }

        

        imageSetup.addEventListener('click', () => {
            imageSetupModal.style.display = 'flex';
        });
        
        okBtn.addEventListener('click', () => {
            imageSetupModal.style.display = 'none';
        });

        

        imageInput.addEventListener("change", function (e) {
    const file = e.target.files[0];
    const reader = new FileReader();

    reader.onload = function () {

    cropModal.style.display = "flex";
    cropImage.src = reader.result;

    if (cropper) {
        cropper.destroy();
    }

    cropper = new Cropper(cropImage, {
        aspectRatio: 16 / 9,
        viewMode: 2,
        autoCropArea: 0.8,
        dragMode: "move",
        background: false,
        zoomable: true,
        scalable: true,
        rotatable: true,
        responsive: true
    });
};

    reader.readAsDataURL(file);
});

rotateBtn.addEventListener("click", () => {
    if (cropper) {
        cropper.rotate(90);
    }
});



const saveCropBtn = document.getElementById("saveCropBtn");

saveCropBtn.addEventListener("click", () => {

    const canvas = cropper.getCroppedCanvas({
        width: 1920,
        height: 1080
    });

    const croppedImage = canvas.toDataURL("image/jpeg");

    images.push(croppedImage);
    localStorage.setItem('images', JSON.stringify(images));
    addMiniImages();

    cropper.destroy();
    cropModal.style.display = "none";
});

        window.onload = () => {
            counterElement.textContent = `Conting: ${count}`;
            addMiniImages();
            
        };
        
        
                radhaButton.addEventListener('click', () => {

    count++;
    localStorage.setItem('count', count);
    counterElement.textContent = `Conting: ${count}`;

    // ðŸ”¹ 2 Radha names create à¤¹à¥‹à¤‚à¤—à¥‡
    for (let i = 0; i < 2; i++) {

        let radhaName = document.createElement('div');
        radhaName.classList.add('radha-name');
        radhaName.textContent = 'à¤°à¤¾à¤§à¤¾';

        // à¤ªà¤¹à¤²à¤¾ white, à¤¦à¥‚à¤¸à¤°à¤¾ red
        radhaName.style.color = (i === 0) ? "white" : "red";

        const randomLeft = Math.random() * window.innerWidth;
        const randomDuration = Math.random() * 5 + 5;

        radhaName.style.left = `${randomLeft}px`;
        radhaName.style.animationDuration = `${randomDuration}s`;

        document.body.appendChild(radhaName);

        setTimeout(() => {
            radhaName.remove();
        }, randomDuration * 1000);
    }


// ðŸ”¹ Popup à¤¸à¤¿à¤°à¥à¤« à¤ªà¤¹à¤²à¥€ à¤¬à¤¾à¤°
    if (!modeSelected) {
        modePopup.style.display = "flex";
    }
});




// ===============================
// PIXABAY AUTO IMAGE SYSTEM
// ===============================

const API_KEY = "54738072-5c45c9ccb57150804452d4fbe";

let imagePool = [];
let slideshowInterval = null;
let currentPage = 1;
let slideshowRunning = false;
let modeSelected = false;
async function fetchImages() {
  
    try {
        // Only Radha Krishna specific terms for search
        const searchTerms = [
            "Radha Krishna",
                      
        ];

        // Randomly select one term from the search list
        const randomSearchTerm = "Radha Krishna divine art illustration";

        const response = await fetch(
            `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(randomSearchTerm)}&image_type=illustration&orientation=vertical&per_page=20&page=${currentPage}&safesearch=true`
        );

        const data = await response.json();

        if (!data.hits || data.hits.length === 0) return;

        // Adding the fetched images to the pool
        data.hits.forEach(img => {
            if (!imagePool.includes(img.largeImageURL)) {
                imagePool.push(img.largeImageURL);
            }
        }); 

        // Increment page for pagination
        currentPage++;

    } catch (error) {
        console.log("Error fetching images:", error);
    }
}



        
        function getNextImage() {
    if (imagePool.length === 0) return null;

    const index = Math.floor(Math.random() * imagePool.length);
    return imagePool.splice(index, 1)[0]; // remove so no repeat
}

async function startSlideshow() {

    if (slideshowRunning) return;

    if (imagePool.length === 0) {
        await fetchImages();
    }

    slideshowRunning = true;

    slideshowInterval = setInterval(async () => {

        if (imagePool.length === 0) {
            await fetchImages();
        }

        const nextImage = getNextImage();
        if (!nextImage) return;

        imageSlideshow.style.backgroundImage = `url(${nextImage})`;

    }, 10000);
}


onlineModeBtn.addEventListener("click", () => {
    modePopup.style.display = "none";
    modeSelected = true;
    startSlideshow();
});

offlineModeBtn.addEventListener("click", () => {
    modePopup.style.display = "none";
    modeSelected = true;
    startOfflineSlideshow();
});

function startOfflineSlideshow() {

    if (images.length === 0) {
        alert("No offline images uploaded!");
        return;
    }

    let index = 0;

    imageSlideshow.style.backgroundImage = `url(${images[0]})`;

    setInterval(() => {
        index = (index + 1) % images.length;
        imageSlideshow.style.backgroundImage = `url(${images[index]})`;
    }, 10000);
}

/* ===== FRAME EDITOR JS ===== */

const frameUpload = document.getElementById("frameUpload");
const blurImage = document.getElementById("blurImage");
const clearImage = document.getElementById("clearImage");

let scale = 1;
let rotation = 0;
let posX = 0;
let posY = 0;
let dragging = false;
let startX, startY;

frameUpload.addEventListener("change", e=>{
    const reader = new FileReader();
    reader.onload = ()=>{
        blurImage.src = reader.result;
        clearImage.src = reader.result;
        resetTransform();
    };
    reader.readAsDataURL(e.target.files[0]);
});

function resetTransform(){
    scale = 1;
    rotation = 0;
    posX = 0;
    posY = 0;
    updateTransform();
}

function updateTransform(){
    const transform =
        `translate(-50%, -50%) translate(${posX}px, ${posY}px) scale(${scale}) rotate(${rotation}deg)`;
    blurImage.style.transform = transform;
    clearImage.style.transform = transform;
}

/* Zoom */
document.getElementById("zoomIn").onclick = ()=>{
    scale += 0.1;
    updateTransform();
};

document.getElementById("zoomOut").onclick = ()=>{
    if(scale > 0.2){
        scale -= 0.1;
        updateTransform();
    }
};

/* Rotate */
document.getElementById("rotateFrame").onclick = ()=>{
    rotation += 90;
    updateTransform();
};

/* Drag */
clearImage.addEventListener("mousedown", e=>{
    dragging = true;
    startX = e.clientX - posX;
    startY = e.clientY - posY;
    clearImage.style.cursor="grabbing";
});

document.addEventListener("mouseup", ()=>{
    dragging = false;
    clearImage.style.cursor="grab";
});

document.addEventListener("mousemove", e=>{
    if(!dragging) return;
    posX = e.clientX - startX;
    posY = e.clientY - startY;
    updateTransform();
});

    </script>
</body>
</html>
